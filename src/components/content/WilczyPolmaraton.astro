---
import PhotoGallery from "../PhotoGallery.astro";
import { marathonPhotos2025 } from "../../data/marathon-photos";

interface Props {
  t: (key: string) => string;
}

const { t } = Astro.props;

const eventDate = "17.10.2026";
const eventNumber = "IV";
const ytPreviewLink = "https://www.youtube.com/embed/sY6au0yZyp4";
---

<!-- Hero Section -->
<div class="relative h-[60vh] flex items-center justify-center text-white">
  <div class="absolute inset-0">
    <img
      src="/halfmarathon/header.webp"
      alt={t("halfmarathon.background_alt")}
      class="w-full h-full object-cover"
    />
    <div class="absolute inset-0 bg-black/60"></div>
  </div>
  <div class="relative text-center space-y-4">
    <div class="bg-white/20 px-8 py-4 rounded-lg shadow-lg backdrop-blur-sm mx-auto max-w-full">
      <h1 class="text-5xl font-bold text-white">
        {eventNumber} {t("halfmarathon.event_name")}
      </h1>
      <div class="mt-3">
        <h2 class="text-2xl font-semibold text-white"></h2>
      </div>
    </div>

    <div class="bg-white/20 px-8 py-4 rounded-lg shadow-lg backdrop-blur-sm mx-auto inline-block">
      <h1 class="text-3xl font-bold text-white">{eventDate}</h1>
    </div>

    <div>
      <a
        href="https://www.facebook.com/events/1557925925215210"
        target="_blank"
        class="inline-block bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-full"
      >
        {t("halfmarathon.event_button")}
      </a>
      <a
        href="https://zatyrani.pl/wilczy-polmaraton"
        target="_blank"
        class="inline-block bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-full"
        id="zapiszsiepolmaraton"
      >
        {t("halfmarathon.register_button")}
      </a>
    </div>
  </div>

  <!-- Modal Structure -->
  <div id="registrationModal" class="modal hidden">
    <div class="modal-content">
      <h2 class="modal-title">{t("halfmarathon.modal_title")}</h2>
      <p class="modal-body">
        {t("halfmarathon.modal_body")}
        <a href="mailto:biuro@zatyrani.pl" class="text-blue-600 hover:underline"
          >biuro@zatyrani.pl</a
        >, {t("halfmarathon.modal_body_end")}
      </p>
      <button class="modal-btn">{t("halfmarathon.modal_ok")}</button>
    </div>
  </div>

  <style>
    /* Modal background */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    /* Hide by default */
    .hidden {
      display: none;
    }

    /* Modal box */
    .modal-content {
      background: #fff;
      padding: 2rem;
      border-radius: 12px;
      max-width: 450px;
      width: 90%;
      text-align: center;
      position: relative;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      font-family: "Segoe UI", sans-serif;
    }

    /* Close button */
    .close {
      position: absolute;
      top: 0.5rem;
      right: 1rem;
      font-size: 1.5rem;
      font-weight: bold;
      cursor: pointer;
      color: #555;
    }

    /* Modal title and body */
    .modal-title {
      font-size: 1.5rem;
      color: #333;
      margin-bottom: 1rem;
    }

    .modal-body {
      font-size: 1rem;
      color: #666;
      margin-bottom: 1.5rem;
    }

    /* Modal button */
    .modal-btn {
      background: #16a34a;
      color: white;
      border: none;
      padding: 0.6rem 1.5rem;
      border-radius: 60px;
      cursor: pointer;
      font-size: 1rem;
      transition: background 0.2s ease;
    }

    .modal-btn:hover {
      background: #15803d;
    }

    .text-blue-600 {
      color: #2563eb;
    }

    .text-blue-600:hover {
      text-decoration: underline;
    }
  </style>

  <script>
    const button = document.getElementById("zapiszsiepolmaraton");
    const modal = document.getElementById("registrationModal");
    const okBtn = modal.querySelector(".modal-btn");

    // Open modal on button click
    button.addEventListener("click", (e) => {
      e.preventDefault();
      modal.classList.remove("hidden");
    });

    okBtn.addEventListener("click", () => modal.classList.add("hidden"));

    // Close modal by clicking outside content
    window.addEventListener("click", (e) => {
      if (e.target === modal) modal.classList.add("hidden");
    });
  </script>
</div>

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
  <!-- Event Details -->
  <div class="grid md:grid-cols-2 gap-12 mb-16">
    <!-- Video Section -->
    <div>
      <div class="aspect-video rounded-lg overflow-hidden">
        <iframe
          width="100%"
          height="100%"
          src={ytPreviewLink}
          title={t("halfmarathon.title")}
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen></iframe>
      </div>
    </div>

    <!-- Text Section -->
    <div class="flex items-center">
      <div class="space-y-6 text-xl">
        <p class="text-gray-700">
          {t("halfmarathon.paragraph1")}
        </p>
        <p class="text-gray-700">
          {t("halfmarathon.paragraph2")}
        </p>
        <p class="text-gray-700">
          {t("halfmarathon.paragraph3")}
        </p>
      </div>
    </div>
  </div>
</div>

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
  <!-- Bullet List and Image Section -->
  <h2 class="text-3xl font-bold text-center">{t("halfmarathon.attractions_title")}</h2>
  <div class="grid md:grid-cols-2 gap-12 mb-16 py-8">
    <!-- Bullet List Section -->
    <div class="space-y-4 flex flex-col justify-center text-gray-700 text-lg">
      <ul class="list-none space-y-3">
        <li class="flex items-center">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-5 h-5 text-green-500 mr-2 flex-none"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path>
          </svg>
          {t("halfmarathon.attraction1")}
        </li>
        <li class="flex items-center text-gray-700">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-5 h-5 text-green-500 mr-2 flex-none"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path>
          </svg>
          {t("halfmarathon.attraction2")}
        </li>
        <li class="flex items-center text-gray-700">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-5 h-5 text-green-500 mr-2 flex-none"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path>
          </svg>
          {t("halfmarathon.attraction3")}
        </li>
        <li class="flex items-center text-gray-700">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-5 h-5 text-green-500 mr-2 flex-none"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path>
          </svg>
          {t("halfmarathon.attraction4")}
        </li>
        <li class="flex items-center text-gray-700">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-5 h-5 text-green-500 mr-2 flex-none"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path>
          </svg>
          {t("halfmarathon.attraction5")}
        </li>
      </ul>
    </div>

    <!-- Image Section -->
    <div class="flex items-center justify-center">
      <img
        src="/halfmarathon/logo.png"
        alt={t("halfmarathon.logo_alt")}
        class="w-full max-w-sm rounded-lg shadow-lg"
      />
    </div>
  </div>
</div>

<!-- Photos Section -->
<section class="max-w-7xl mx-auto">
  <h2 class="text-3xl font-bold text-center">{t("halfmarathon.photos_title")}</h2>
  <PhotoGallery
    photos={marathonPhotos2025}
    author="PaweÅ‚ Bernas"
    authorLink="https://www.instagram.com/pawelbernas.fotografia"
  />
  <div class="text-center mt-4 text-lg">
    <p>
      {t("halfmarathon.photos_full_gallery")} <a
        href="https://photos.google.com/share/AF1QipPUNi2uDta48zu80edE-TiK6R03kIAuLNt7XfEQmsiRSlGmXe0ZuYHzG89zg22zJw?key=cHZmY2kyeF91WkcydS13VmF1TTF3WnJqejdGV0Z3"
        class="text-blue-600 hover:underline">{t("halfmarathon.photos_here")}</a
      >
    </p>
  </div>
</section>

<!-- Race Office Location -->
<section class="mt-16">
  <h2 class="text-3xl font-bold text-center">{t("halfmarathon.race_office_title")}</h2>
  <div class="max-w-3xl mx-auto">
    <p class="mt-4 mb-2 text-gray-600 text-center">
      {t("halfmarathon.race_office_location")}
      <div class="aspect-[16/9] rounded-lg overflow-hidden shadow-md">
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d796.6238701372778!2d18.59522346969745!3d50.188842198221465!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x471137d1988015fd%3A0xa1e08547df1cdfa8!2sDom%20Kultury%20w%20Wilczy%20(biuro%20GOK%20Pilchowice)!5e1!3m2!1sen!2spl!4v1735845595802!5m2!1sen!2spl"
          width="100%"
          height="100%"
          style="border:0;"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>
    </p>
  </div>
</section>
